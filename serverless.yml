service: past-grants-search

provider:
  name: aws
  runtime: nodejs8.10
  stage: test
  region: eu-west-2

functions:
  app:
    handler: index.handler
    timeout: 30 # in seconds
    events:
      - http: ANY /
      - http: 'ANY {proxy+}'

package:
  exclude:
    - .*
    - .git/**
    - scripts/**
    - test/**
    - node_modules/2-thenable/**
    - node_modules/@babel/**
    - node_modules/@bcoe/**
    - node_modules/@cnakazawa/**
    - node_modules/@hapi/**
    - node_modules/@istanbuljs/**
    - node_modules/@jest/**
    - node_modules/@mrmlnc/**
    - node_modules/@nodelib/**
    - node_modules/@protobufjs/**
    - node_modules/@serverless/**
    - node_modules/@sindresorhus/**
    - node_modules/@sinonjs/**
    - node_modules/@szmarczak/**
    - node_modules/@tencent-sdk/**
    - node_modules/@types/**
    - node_modules/@typescript-eslint/**
    - node_modules/abab/**
    - node_modules/abbrev/**
    - node_modules/accepts/**
    - node_modules/acorn/**
    - node_modules/acorn-globals/**
    - node_modules/acorn-jsx/**
    - node_modules/acorn-walk/**
    - node_modules/adm-zip/**
    - node_modules/after/**
    - node_modules/agent-base/**
    - node_modules/ajv/**
    - node_modules/ansi-align/**
    - node_modules/ansi-colors/**
    - node_modules/ansi-escapes/**
    - node_modules/ansi-regex/**
    - node_modules/ansi-styles/**
    - node_modules/anymatch/**
    - node_modules/app-module-path/**
    - node_modules/archive-type/**
    - node_modules/archiver/**
    - node_modules/archiver-utils/**
    - node_modules/argparse/**
    - node_modules/arr-diff/**
    - node_modules/arr-flatten/**
    - node_modules/arr-union/**
    - node_modules/array-flatten/**
    - node_modules/array-union/**
    - node_modules/array-uniq/**
    - node_modules/array-unique/**
    - node_modules/arraybuffer.slice/**
    - node_modules/asn1/**
    - node_modules/assert-plus/**
    - node_modules/assign-symbols/**
    - node_modules/ast-module-types/**
    - node_modules/astral-regex/**
    - node_modules/async/**
    - node_modules/async-limiter/**
    - node_modules/asynckit/**
    - node_modules/atob/**
    - node_modules/aws-sdk/**
    - node_modules/aws-sign2/**
    - node_modules/aws4/**
    - node_modules/axios/**
    - node_modules/babel-jest/**
    - node_modules/babel-plugin-istanbul/**
    - node_modules/babel-plugin-jest-hoist/**
    - node_modules/babel-preset-current-- node-syntax/**
    - node_modules/babel-preset-jest/**
    - node_modules/backo2/**
    - node_modules/balanced-match/**
    - node_modules/base/**
    - node_modules/base64-arraybuffer/**
    - node_modules/base64-js/**
    - node_modules/bcrypt-pbkdf/**
    - node_modules/better-assert/**
    - node_modules/binary-extensions/**
    - node_modules/bl/**
    - node_modules/blob/**
    - node_modules/bluebird/**
    - node_modules/body-parser/**
    - node_modules/boxen/**
    - node_modules/brace-expansion/**
    - node_modules/braces/**
    - node_modules/browser-process-hrtime/**
    - node_modules/bser/**
    - node_modules/bson/**
    - node_modules/buffer/**
    - node_modules/buffer-alloc/**
    - node_modules/buffer-alloc-unsafe/**
    - node_modules/buffer-crc32/**
    - node_modules/buffer-equal-constant-time/**
    - node_modules/buffer-fill/**
    - node_modules/buffer-from/**
    - node_modules/builtin-modules/**
    - node_modules/bytes/**
    - node_modules/cache-base/**
    - node_modules/cacheable-request/**
    - node_modules/cachedir/**
    - node_modules/call-me-maybe/**
    - node_modules/callsite/**
    - node_modules/callsites/**
    - node_modules/camelcase/**
    - node_modules/capture-exit/**
    - node_modules/capture-stack-trace/**
    - node_modules/caseless/**
    - node_modules/caw/**
    - node_modules/chalk/**
    - node_modules/char-regex/**
    - node_modules/chardet/**
    - node_modules/child-process-ext/**
    - node_modules/chokidar/**
    - node_modules/ci-info/**
    - node_modules/class-utils/**
    - node_modules/cli-boxes/**
    - node_modules/cli-color/**
    - node_modules/cli-width/**
    - node_modules/cliui/**
    - node_modules/clone-response/**
    - node_modules/co/**
    - node_modules/collect-v8-coverage/**
    - node_modules/collection-visit/**
    - node_modules/color/**
    - node_modules/color-convert/**
    - node_modules/color-name/**
    - node_modules/color-string/**
    - node_modules/colornames/**
    - node_modules/colors/**
    - node_modules/colorspace/**
    - node_modules/combined-stream/**
    - node_modules/commander/**
    - node_modules/commondir/**
    - node_modules/component-bind/**
    - node_modules/component-emitter/**
    - node_modules/component-inherit/**
    - node_modules/compress-commons/**
    - node_modules/concat-map/**
    - node_modules/config-chain/**
    - node_modules/configstore/**
    - node_modules/content-disposition/**
    - node_modules/content-type/**
    - node_modules/convert-source-map/**
    - node_modules/cookie/**
    - node_modules/cookie-signature/**
    - node_modules/cookiejar/**
    - node_modules/copy-descriptor/**
    - node_modules/core-util-is/**
    - node_modules/crc/**
    - node_modules/crc32-stream/**
    - node_modules/create-error-class/**
    - node_modules/cron-parser/**
    - node_modules/cross-spawn/**
    - node_modules/crypto-random-string/**
    - node_modules/cssom/**
    - node_modules/cssstyle/**
    - node_modules/cuid/**
    - node_modules/d/**
    - node_modules/dashdash/**
    - node_modules/data-urls/**
    - node_modules/dayjs/**
    - node_modules/debug/**
    - node_modules/decamelize/**
    - node_modules/decimal.js/**
    - node_modules/decode-uri-component/**
    - node_modules/decomment/**
    - node_modules/decompress/**
    - node_modules/decompress-response/**
    - node_modules/decompress-tar/**
    - node_modules/decompress-tarbz2/**
    - node_modules/decompress-targz/**
    - node_modules/decompress-unzip/**
    - node_modules/deep-extend/**
    - node_modules/deep-is/**
    - node_modules/deepmerge/**
    - node_modules/defer-to-connect/**
    - node_modules/deferred/**
    - node_modules/define-properties/**
    - node_modules/define-property/**
    - node_modules/delayed-stream/**
    - node_modules/denque/**
    - node_modules/depd/**
    - node_modules/dependency-tree/**
    - node_modules/destroy/**
    - node_modules/detect-newline/**
    - node_modules/detective-amd/**
    - node_modules/detective-cjs/**
    - node_modules/detective-es6/**
    - node_modules/detective-less/**
    - node_modules/detective-postcss/**
    - node_modules/detective-sass/**
    - node_modules/detective-scss/**
    - node_modules/detective-stylus/**
    - node_modules/detective-typescript/**
    - node_modules/diagnostics/**
    - node_modules/dictionary-cy-gb/**
    - node_modules/dictionary-en-gb/**
    - node_modules/diff-sequences/**
    - node_modules/dijkstrajs/**
    - node_modules/dir-glob/**
    - node_modules/doctrine/**
    - node_modules/domexception/**
    - node_modules/dot-prop/**
    - node_modules/dot-qs/**
    - node_modules/dotenv/**
    - node_modules/download/**
    - node_modules/duplexer/**
    - node_modules/duplexer3/**
    - node_modules/duplexify/**
    - node_modules/duration/**
    - node_modules/ecc-jsbn/**
    - node_modules/ecdsa-sig-formatter/**
    - node_modules/ee-first/**
    - node_modules/emittery/**
    - node_modules/emoji-regex/**
    - node_modules/enabled/**
    - node_modules/encodeurl/**
    - node_modules/encoding/**
    - node_modules/end-of-stream/**
    - node_modules/engine.io-client/**
    - node_modules/engine.io-parser/**
    - node_modules/enhanced-resolve/**
    - node_modules/enquirer/**
    - node_modules/env-variable/**
    - node_modules/errno/**
    - node_modules/error-ex/**
    - node_modules/es-abstract/**
    - node_modules/es-to-primitive/**
    - node_modules/es5-ext/**
    - node_modules/es6-iterator/**
    - node_modules/es6-promisify/**
    - node_modules/es6-set/**
    - node_modules/es6-symbol/**
    - node_modules/es6-weak-map/**
    - node_modules/escape-goat/**
    - node_modules/escape-html/**
    - node_modules/escape-string-regexp/**
    - node_modules/escodegen/**
    - node_modules/eslint-plugin-es/**
    - node_modules/eslint-scope/**
    - node_modules/eslint-utils/**
    - node_modules/eslint-visitor-keys/**
    - node_modules/esniff/**
    - node_modules/espree/**
    - node_modules/esprima/**
    - node_modules/esquery/**
    - node_modules/esrecurse/**
    - node_modules/essentials/**
    - node_modules/estraverse/**
    - node_modules/esutils/**
    - node_modules/etag/**
    - node_modules/event-emitter/**
    - node_modules/eventemitter3/**
    - node_modules/events/**
    - node_modules/exec-sh/**
    - node_modules/execa/**
    - node_modules/exit/**
    - node_modules/expand-brackets/**
    - node_modules/expect/**
    - node_modules/express/**
    - node_modules/ext/**
    - node_modules/ext-list/**
    - node_modules/ext-name/**
    - node_modules/extend/**
    - node_modules/extend-shallow/**
    - node_modules/external-editor/**
    - node_modules/extglob/**
    - node_modules/extsprintf/**
    - node_modules/fast-deep-equal/**
    - node_modules/fast-glob/**
    - node_modules/fast-json-stable-stringify/**
    - node_modules/fast-levenshtein/**
    - node_modules/fast-safe-stringify/**
    - node_modules/fastq/**
    - node_modules/fb-watchman/**
    - node_modules/fd-slicer/**
    - node_modules/fecha/**
    - node_modules/figures/**
    - node_modules/file-entry-cache/**
    - node_modules/file-exists-dazinatorfork/**
    - node_modules/file-type/**
    - node_modules/filename-reserved-regex/**
    - node_modules/filenamify/**
    - node_modules/filesize/**
    - node_modules/filing-cabinet/**
    - node_modules/fill-range/**
    - node_modules/finalhandler/**
    - node_modules/find/**
    - node_modules/find-cache-dir/**
    - node_modules/find-package-json/**
    - node_modules/find-process/**
    - node_modules/find-requires/**
    - node_modules/find-up/**
    - node_modules/flat/**
    - node_modules/flat-cache/**
    - node_modules/flatted/**
    - node_modules/flatten/**
    - node_modules/follow-redirects/**
    - node_modules/for-in/**
    - node_modules/forever-agent/**
    - node_modules/form-data/**
    - node_modules/formidable/**
    - node_modules/forwarded/**
    - node_modules/fragment-cache/**
    - node_modules/fresh/**
    - node_modules/from/**
    - node_modules/from2/**
    - node_modules/fs-constants/**
    - node_modules/fs-extra/**
    - node_modules/fs.realpath/**
    - node_modules/fs2/**
    - node_modules/fsevents/**
    - node_modules/function-bind/**
    - node_modules/functional-red-black-tree/**
    - node_modules/gensync/**
    - node_modules/get-amd-module-type/**
    - node_modules/get-caller-file/**
    - node_modules/get-own-enumerable-property-symbols/**
    - node_modules/get-package-type/**
    - node_modules/get-port/**
    - node_modules/get-proxy/**
    - node_modules/get-stdin/**
    - node_modules/get-stream/**
    - node_modules/get-value/**
    - node_modules/getpass/**
    - node_modules/glob/**
    - node_modules/glob-parent/**
    - node_modules/glob-to-regexp/**
    - node_modules/global-dirs/**
    - node_modules/globals/**
    - node_modules/globby/**
    - node_modules/gonzales-pe/**
    - node_modules/got/**
    - node_modules/graceful-fs/**
    - node_modules/graceful-readlink/**
    - node_modules/graphlib/**
    - node_modules/growly/**
    - node_modules/har-schema/**
    - node_modules/har-validator/**
    - node_modules/has/**
    - node_modules/has-binary2/**
    - node_modules/has-cors/**
    - node_modules/has-flag/**
    - node_modules/has-symbol-support-x/**
    - node_modules/has-symbols/**
    - node_modules/has-to-string-tag-x/**
    - node_modules/has-value/**
    - node_modules/has-values/**
    - node_modules/has-yarn/**
    - node_modules/hosted-git-info/**
    - node_modules/html-encoding-sniffer/**
    - node_modules/html-escaper/**
    - node_modules/http-cache-semantics/**
    - node_modules/http-errors/**
    - node_modules/http-signature/**
    - node_modules/https-proxy-agent/**
    - node_modules/human-signals/**
    - node_modules/iconv-lite/**
    - node_modules/ieee754/**
    - node_modules/ignore/**
    - node_modules/ignore-by-default/**
    - node_modules/immediate/**
    - node_modules/import-fresh/**
    - node_modules/import-lazy/**
    - node_modules/import-local/**
    - node_modules/imurmurhash/**
    - node_modules/indexes-of/**
    - node_modules/indexof/**
    - node_modules/inflight/**
    - node_modules/inherits/**
    - node_modules/ini/**
    - node_modules/into-stream/**
    - node_modules/ip-regex/**
    - node_modules/ipaddr.js/**
    - node_modules/is-accessor-descriptor/**
    - node_modules/is-arrayish/**
    - node_modules/is-binary-path/**
    - node_modules/is-buffer/**
    - node_modules/is-callable/**
    - node_modules/is-ci/**
    - node_modules/is-data-descriptor/**
    - node_modules/is-date-object/**
    - node_modules/is-descriptor/**
    - node_modules/is-docker/**
    - node_modules/is-extendable/**
    - node_modules/is-extglob/**
    - node_modules/is-fullwidth-code-point/**
    - node_modules/is-generator-fn/**
    - node_modules/is-glob/**
    - node_modules/is-installed-globally/**
    - node_modules/is-nan/**
    - node_modules/is-natural-number/**
    - node_modules/is-npm/**
    - node_modules/is-number/**
    - node_modules/is-obj/**
    - node_modules/is-object/**
    - node_modules/is-path-inside/**
    - node_modules/is-plain-obj/**
    - node_modules/is-plain-object/**
    - node_modules/is-potential-custom-element-name/**
    - node_modules/is-promise/**
    - node_modules/is-redirect/**
    - node_modules/is-regex/**
    - node_modules/is-regexp/**
    - node_modules/is-relative-path/**
    - node_modules/is-retry-allowed/**
    - node_modules/is-stream/**
    - node_modules/is-symbol/**
    - node_modules/is-typedarray/**
    - node_modules/is-url/**
    - node_modules/is-windows/**
    - node_modules/is-wsl/**
    - node_modules/is-yarn-global/**
    - node_modules/isarray/**
    - node_modules/isexe/**
    - node_modules/iso8601-duration/**
    - node_modules/isobject/**
    - node_modules/isomorphic-fetch/**
    - node_modules/isomorphic-ws/**
    - node_modules/isstream/**
    - node_modules/istanbul-lib-coverage/**
    - node_modules/istanbul-lib-instrument/**
    - node_modules/istanbul-lib-report/**
    - node_modules/istanbul-lib-source-maps/**
    - node_modules/istanbul-reports/**
    - node_modules/isurl/**
    - node_modules/java-invoke-local/**
    - node_modules/jest-changed-files/**
    - node_modules/jest-config/**
    - node_modules/jest-diff/**
    - node_modules/jest-docblock/**
    - node_modules/jest-each/**
    - node_modules/jest-environment-jsdom/**
    - node_modules/jest-get-type/**
    - node_modules/jest-haste-map/**
    - node_modules/jest-jasmine2/**
    - node_modules/jest-leak-detector/**
    - node_modules/jest-matcher-utils/**
    - node_modules/jest-message-util/**
    - node_modules/jest-mock/**
    - node_modules/jest-pnp-resolver/**
    - node_modules/jest-regex-util/**
    - node_modules/jest-resolve/**
    - node_modules/jest-resolve-dependencies/**
    - node_modules/jest-runner/**
    - node_modules/jest-runtime/**
    - node_modules/jest-serializer/**
    - node_modules/jest-snapshot/**
    - node_modules/jest-util/**
    - node_modules/jest-validate/**
    - node_modules/jest-watcher/**
    - node_modules/jest-worker/**
    - node_modules/jmespath/**
    - node_modules/js-string-escape/**
    - node_modules/js-tokens/**
    - node_modules/js-yaml/**
    - node_modules/jsbn/**
    - node_modules/jsdom/**
    - node_modules/jsesc/**
    - node_modules/json-buffer/**
    - node_modules/json-cycle/**
    - node_modules/json-parse-better-errors/**
    - node_modules/json-refs/**
    - node_modules/json-schema/**
    - node_modules/json-schema-traverse/**
    - node_modules/json-stable-stringify-without-jsonify/**
    - node_modules/json-stringify-safe/**
    - node_modules/json5/**
    - node_modules/jsonata/**
    - node_modules/jsonfile/**
    - node_modules/jsonpath-plus/**
    - node_modules/jsonwebtoken/**
    - node_modules/jsprim/**
    - node_modules/jszip/**
    - node_modules/jwa/**
    - node_modules/jws/**
    - node_modules/jwt-decode/**
    - node_modules/keyv/**
    - node_modules/kind-of/**
    - node_modules/kleur/**
    - node_modules/kuler/**
    - node_modules/latest-version/**
    - node_modules/lazystream/**
    - node_modules/leven/**
    - node_modules/levn/**
    - node_modules/lie/**
    - node_modules/lines-and-columns/**
    - node_modules/locate-path/**
    - node_modules/lockfile/**
    - node_modules/lodash/**
    - node_modules/lodash.defaults/**
    - node_modules/lodash.difference/**
    - node_modules/lodash.flatten/**
    - node_modules/lodash.includes/**
    - node_modules/lodash.isboolean/**
    - node_modules/lodash.isinteger/**
    - node_modules/lodash.isnumber/**
    - node_modules/lodash.isplainobject/**
    - node_modules/lodash.isstring/**
    - node_modules/lodash.once/**
    - node_modules/lodash.sortby/**
    - node_modules/lodash.union/**
    - node_modules/log/**
    - node_modules/logform/**
    - node_modules/long/**
    - node_modules/long-timeout/**
    - node_modules/lowercase-keys/**
    - node_modules/lru-cache/**
    - node_modules/lru-queue/**
    - node_modules/luxon/**
    - node_modules/make-dir/**
    - node_modules/makeerror/**
    - node_modules/map-age-cleaner/**
    - node_modules/map-cache/**
    - node_modules/map-stream/**
    - node_modules/map-visit/**
    - node_modules/md5-file/**
    - node_modules/media-typer/**
    - node_modules/mem/**
    - node_modules/memoizee/**
    - node_modules/memory-fs/**
    - node_modules/memory-pager/**
    - node_modules/merge-descriptors/**
    - node_modules/merge-stream/**
    - node_modules/merge2/**
    - node_modules/methods/**
    - node_modules/micromatch/**
    - node_modules/mime/**
    - node_modules/mime-db/**
    - node_modules/mime-types/**
    - node_modules/mimic-fn/**
    - node_modules/mimic-response/**
    - node_modules/minimatch/**
    - node_modules/minimist/**
    - node_modules/mixin-deep/**
    - node_modules/mkdirp/**
    - node_modules/module-definition/**
    - node_modules/module-lookup-amd/**
    - node_modules/moment/**
    - node_modules/moment-timezone/**
    - node_modules/mongodb/**
    - node_modules/mongodb-memory-server-core/**
    - node_modules/ms/**
    - node_modules/nanoid/**
    - node_modules/nanomatch/**
    - node_modules/native-promise-only/**
    - node_modules/natural-compare/**
    - node_modules/ncjsm/**
    - node_modules/negotiator/**
    - node_modules/next-tick/**
    - node_modules/nice-try/**
    - node_modules/node-dir/**
    - node_modules/node-fetch/**
    - node_modules/node-int64/**
    - node_modules/node-modules-regexp/**
    - node_modules/node-notifier/**
    - node_modules/node-schedule/**
    - node_modules/node-source-walk/**
    - node_modules/nopt/**
    - node_modules/normalize-package-data/**
    - node_modules/normalize-path/**
    - node_modules/normalize-url/**
    - node_modules/npm-conf/**
    - node_modules/npm-run-path/**
    - node_modules/nspell/**
    - node_modules/nwsapi/**
    - node_modules/oauth-sign/**
    - node_modules/object-assign/**
    - node_modules/object-component/**
    - node_modules/object-copy/**
    - node_modules/object-hash/**
    - node_modules/object-inspect/**
    - node_modules/object-keys/**
    - node_modules/object-visit/**
    - node_modules/object.assign/**
    - node_modules/object.fromentries/**
    - node_modules/object.pick/**
    - node_modules/on-finished/**
    - node_modules/on-headers/**
    - node_modules/once/**
    - node_modules/one-time/**
    - node_modules/onetime/**
    - node_modules/open/**
    - node_modules/opn/**
    - node_modules/optionator/**
    - node_modules/os-tmpdir/**
    - node_modules/p-cancelable/**
    - node_modules/p-defer/**
    - node_modules/p-each-series/**
    - node_modules/p-event/**
    - node_modules/p-finally/**
    - node_modules/p-is-promise/**
    - node_modules/p-limit/**
    - node_modules/p-locate/**
    - node_modules/p-memoize/**
    - node_modules/p-queue/**
    - node_modules/p-retry/**
    - node_modules/p-timeout/**
    - node_modules/p-try/**
    - node_modules/package-json/**
    - node_modules/pako/**
    - node_modules/parent-module/**
    - node_modules/parse-json/**
    - node_modules/parse5/**
    - node_modules/parseqs/**
    - node_modules/parseuri/**
    - node_modules/parseurl/**
    - node_modules/pascalcase/**
    - node_modules/path-dirname/**
    - node_modules/path-exists/**
    - node_modules/path-is-absolute/**
    - node_modules/path-is-inside/**
    - node_modules/path-key/**
    - node_modules/path-loader/**
    - node_modules/path-parse/**
    - node_modules/path-to-regexp/**
    - node_modules/path-type/**
    - node_modules/pause-stream/**
    - node_modules/pend/**
    - node_modules/performance-now/**
    - node_modules/picomatch/**
    - node_modules/pify/**
    - node_modules/pinkie/**
    - node_modules/pinkie-promise/**
    - node_modules/pirates/**
    - node_modules/pkg-dir/**
    - node_modules/please-upgrade-node/**
    - node_modules/portfinder/**
    - node_modules/posix-character-classes/**
    - node_modules/postcss/**
    - node_modules/postcss-values-parser/**
    - node_modules/precinct/**
    - node_modules/prelude-ls/**
    - node_modules/prepend-http/**
    - node_modules/pretty-format/**
    - node_modules/prettyoutput/**
    - node_modules/process-nextick-args/**
    - node_modules/progress/**
    - node_modules/promise-queue/**
    - node_modules/prompts/**
    - node_modules/proto-list/**
    - node_modules/protobufjs/**
    - node_modules/proxy-addr/**
    - node_modules/prr/**
    - node_modules/pseudomap/**
    - node_modules/psl/**
    - node_modules/pstree.remy/**
    - node_modules/pump/**
    - node_modules/punycode/**
    - node_modules/pupa/**
    - node_modules/qs/**
    - node_modules/query-string/**
    - node_modules/querystring/**
    - node_modules/ramda/**
    - node_modules/range-parser/**
    - node_modules/raw-body/**
    - node_modules/rc/**
    - node_modules/react-is/**
    - node_modules/read-pkg/**
    - node_modules/read-pkg-up/**
    - node_modules/readable-stream/**
    - node_modules/readdirp/**
    - node_modules/regenerator-runtime/**
    - node_modules/regex-not/**
    - node_modules/regexpp/**
    - node_modules/registry-auth-token/**
    - node_modules/registry-url/**
    - node_modules/remove-trailing-separator/**
    - node_modules/repeat-element/**
    - node_modules/repeat-string/**
    - node_modules/replaceall/**
    - node_modules/request/**
    - node_modules/request-promise-core/**
    - node_modules/request-promise-native/**
    - node_modules/require-directory/**
    - node_modules/require-main-filename/**
    - node_modules/requirejs/**
    - node_modules/requirejs-config-file/**
    - node_modules/require_optional/**
    - node_modules/resolve/**
    - node_modules/resolve-cwd/**
    - node_modules/resolve-dependency-path/**
    - node_modules/resolve-from/**
    - node_modules/resolve-url/**
    - node_modules/responselike/**
    - node_modules/ret/**
    - node_modules/retry/**
    - node_modules/reusify/**
    - node_modules/rimraf/**
    - node_modules/rsvp/**
    - node_modules/run-async/**
    - node_modules/run-parallel/**
    - node_modules/rxjs/**
    - node_modules/safe-buffer/**
    - node_modules/safe-regex/**
    - node_modules/safer-buffer/**
    - node_modules/sane/**
    - node_modules/saslprep/**
    - node_modules/sass-lookup/**
    - node_modules/sax/**
    - node_modules/saxes/**
    - node_modules/seek-bzip/**
    - node_modules/semver/**
    - node_modules/semver-compare/**
    - node_modules/semver-diff/**
    - node_modules/semver-regex/**
    - node_modules/send/**
    - node_modules/serve-static/**
    - node_modules/server-timings/**
    - node_modules/serverless-http/**
    - node_modules/set-blocking/**
    - node_modules/set-immediate-shim/**
    - node_modules/set-value/**
    - node_modules/setprototypeof/**
    - node_modules/shebang-command/**
    - node_modules/shebang-regex/**
    - node_modules/shellwords/**
    - node_modules/shortid/**
    - node_modules/signal-exit/**
    - node_modules/simple-git/**
    - node_modules/simple-swizzle/**
    - node_modules/sisteransi/**
    - node_modules/slash/**
    - node_modules/slice-ansi/**
    - node_modules/snapdragon/**
    - node_modules/snapdragon-- node/**
    - node_modules/snapdragon-util/**
    - node_modules/socket.io-client/**
    - node_modules/socket.io-parser/**
    - node_modules/sort-keys/**
    - node_modules/sort-keys-length/**
    - node_modules/sorted-array-functions/**
    - node_modules/source-map/**
    - node_modules/source-map-resolve/**
    - node_modules/source-map-support/**
    - node_modules/source-map-url/**
    - node_modules/sparse-bitfield/**
    - node_modules/spdx-correct/**
    - node_modules/spdx-exceptions/**
    - node_modules/spdx-expression-parse/**
    - node_modules/spdx-license-ids/**
    - node_modules/split-string/**
    - node_modules/split2/**
    - node_modules/sprintf-js/**
    - node_modules/sprintf-kit/**
    - node_modules/sshpk/**
    - node_modules/stack-trace/**
    - node_modules/stack-utils/**
    - node_modules/static-extend/**
    - node_modules/statuses/**
    - node_modules/stealthy-require/**
    - node_modules/stream-combiner/**
    - node_modules/stream-promise/**
    - node_modules/stream-shift/**
    - node_modules/stream.finished/**
    - node_modules/stream.pipeline-shim/**
    - node_modules/strict-uri-encode/**
    - node_modules/string-length/**
    - node_modules/string-width/**
    - node_modules/string.prototype.trimend/**
    - node_modules/string.prototype.trimstart/**
    - node_modules/stringify-object/**
    - node_modules/string_decoder/**
    - node_modules/strip-ansi/**
    - node_modules/strip-bom/**
    - node_modules/strip-dirs/**
    - node_modules/strip-eof/**
    - node_modules/strip-final-newline/**
    - node_modules/strip-json-comments/**
    - node_modules/strip-outer/**
    - node_modules/stylus-lookup/**
    - node_modules/superagent/**
    - node_modules/supports-color/**
    - node_modules/supports-hyperlinks/**
    - node_modules/symbol-tree/**
    - node_modules/table/**
    - node_modules/tabtab/**
    - node_modules/tapable/**
    - node_modules/tar-stream/**
    - node_modules/term-size/**
    - node_modules/terminal-link/**
    - node_modules/test-exclude/**
    - node_modules/text-hex/**
    - node_modules/text-table/**
    - node_modules/throat/**
    - node_modules/through/**
    - node_modules/through2/**
    - node_modules/timed-out/**
    - node_modules/timers-ext/**
    - node_modules/tmp/**
    - node_modules/tmpl/**
    - node_modules/to-array/**
    - node_modules/to-buffer/**
    - node_modules/to-fast-properties/**
    - node_modules/to-object-path/**
    - node_modules/to-readable-stream/**
    - node_modules/to-regex/**
    - node_modules/to-regex-range/**
    - node_modules/toidentifier/**
    - node_modules/touch/**
    - node_modules/tough-cookie/**
    - node_modules/tr46/**
    - node_modules/traverse/**
    - node_modules/traverse-chain/**
    - node_modules/trim-repeated/**
    - node_modules/triple-beam/**
    - node_modules/tslib/**
    - node_modules/tsutils/**
    - node_modules/tunnel-agent/**
    - node_modules/tweetnacl/**
    - node_modules/type/**
    - node_modules/type-check/**
    - node_modules/type-detect/**
    - node_modules/type-fest/**
    - node_modules/type-is/**
    - node_modules/typedarray-to-buffer/**
    - node_modules/typescript/**
    - node_modules/unbzip2-stream/**
    - node_modules/undefsafe/**
    - node_modules/union-value/**
    - node_modules/uniq/**
    - node_modules/unique-string/**
    - node_modules/universalify/**
    - node_modules/unpipe/**
    - node_modules/unset-value/**
    - node_modules/untildify/**
    - node_modules/unzip-response/**
    - node_modules/update-notifier/**
    - node_modules/uri-js/**
    - node_modules/urix/**
    - node_modules/url/**
    - node_modules/url-parse-lax/**
    - node_modules/url-to-options/**
    - node_modules/urlencode/**
    - node_modules/use/**
    - node_modules/util-deprecate/**
    - node_modules/utils-merge/**
    - node_modules/uuid/**
    - node_modules/v8-compile-cache/**
    - node_modules/v8-to-istanbul/**
    - node_modules/validate-npm-package-license/**
    - node_modules/vary/**
    - node_modules/velocityjs/**
    - node_modules/verror/**
    - node_modules/w3c-hr-time/**
    - node_modules/w3c-xmlserializer/**
    - node_modules/walker/**
    - node_modules/webidl-conversions/**
    - node_modules/whatwg-encoding/**
    - node_modules/whatwg-fetch/**
    - node_modules/whatwg-mimetype/**
    - node_modules/whatwg-url/**
    - node_modules/which/**
    - node_modules/which-module/**
    - node_modules/widest-line/**
    - node_modules/winston/**
    - node_modules/winston-transport/**
    - node_modules/word-wrap/**
    - node_modules/wrap-ansi/**
    - node_modules/wrappy/**
    - node_modules/write/**
    - node_modules/write-file-atomic/**
    - node_modules/ws/**
    - node_modules/xdg-basedir/**
    - node_modules/xml-name-validator/**
    - node_modules/xml2js/**
    - node_modules/xmlbuilder/**
    - node_modules/xmlchars/**
    - node_modules/xmlhttprequest-ssl/**
    - node_modules/xtend/**
    - node_modules/y18n/**
    - node_modules/yallist/**
    - node_modules/yaml-ast-parser/**
    - node_modules/yamljs/**
    - node_modules/yargs-parser/**
    - node_modules/yauzl/**
    - node_modules/yeast/**
    - node_modules/zip-stream/**

  excludeDevDependencies: true

plugins:
  - serverless-offline
  - serverless-domain-manager

custom:
  stage: ${opt:stage, self:provider.stage}
  serverless-offline:
    httpPort: 8888
    noPrependStageInUrl: true
  domains:
    prod: lambda.blf.digital
    test: test-lambda.blf.digital
  customDomain:
    basePath: 'past-grants-search'
    domainName: ${self:custom.domains.${self:custom.stage}}
    stage: '${self:custom.stage}'
    createRoute53Record: true
